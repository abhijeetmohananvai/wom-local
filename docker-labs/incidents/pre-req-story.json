{"inkVersion":19,"root":[["^You're on-call today, it's 7am in the morning. You login and see there are a dozen of alerts on Slack saying...","\n",["ev",{"^->":"0.2.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":"0.c-0","flg":2},{"s":["^\"HYDDCVBKM1 : ROUTER DOWN. Router curl resonse: false\" ",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":"0.2.s"},[{"#n":"$r2"}],{"->":"ack"},"\n",{"->":"0.g-0"},{"#f":5}],"g-0":["done",{"#f":5}]}],"done",{"ack":[["ev","str","^Acknowlege and act","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Ignore and wait for someone else to pick this up","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"first"},"\n",{"#f":5}],"c-1":["^ ",{"->":"enjoy"},"\n",{"#f":5}]}],{"#f":1}],"first":[["^\"The Production Router is down\"","\n","^A hundreds of thoughts start racing your mind...","\n","^What? Why? How? did the router go down?! What can be the possible reason behind this...","\n","^Being an awesome DevOps Engineer, you...","\n","ev","str","^Check the alerts thoroughly.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Call someone from your team asking for help.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"check"},"\n",{"#f":5}],"c-1":["^ ",{"->":"enjoy"},"\n",{"#f":5}]}],{"#f":1}],"check":[["^As you start checking out the alerts you see something..","\n","^There's not just one kind of alert you also see..","\n","ev","str","^\"HYDDCVBKM1 : iptables or Ip_forward value Changed!\"","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"tip"},"\n",{"#f":5}]}],{"#f":1}],"tip":["^\"HYDDCVBKM1 : iptables or Ip_forward value Changed!\"","\n","^BINGO!!! There you go, now you know the root cause for the Router failure ",{"->":"investigate"},"\n",{"#f":1}],"investigate":[[["ev",{"^->":"investigate.0.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":2},{"s":["^Great job! Let's resolve this.. ",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"investigate.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],{"->":"choice1"},"\n",{"#f":5}]}],{"#f":1}],"choice1":[["^You login to the VPN and have server access now","\n","^Which server do you login to?","\n","ev","str","^Master 1 server","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Master 2 server","/str","/ev",{"*":".^.c-1","flg":20},"ev","str","^Automation server","/str","/ev",{"*":".^.c-2","flg":20},{"c-0":["^ ",{"->":"right1"},"\n",{"#f":5}],"c-1":["^ ",{"->":"wrong1"},"\n",{"#f":5}],"c-2":["^ ",{"->":"wrong1"},"\n",{"#f":5}]}],{"#f":1}],"right1":[["^Good job with noticing the server name from the alert!","\n","^You've logged into the Master1 server now, how should we proceed?","\n","ev","str","^Listing the current pre-requisite values.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Directly edit the pre-requisites values.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"right2"},"\n",{"#f":5}],"c-1":["^ ",{"->":"wrong2"},"\n",{"#f":5}]}],{"#f":1}],"wrong1":["^The first step to resolve an error is to understand what,where and how things went wrong!","\n","^Try reading the alert once again and understand on which server the error has occured. ",{"->":"check2"},"\n",{"#f":1}],"check2":[["^Did you notice the servername for the error?","\n","ev","str","^\"HYDDCVBKM1 : iptables or Ip_forward value Changed!\"","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"choice1"},"\n",{"#f":5}]}],{"#f":1}],"wrong2":[["ev","str","^It is said \"Haste makes waste\"","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n","^The first step to resolve an error is to understand what,where and how things went wrong!","\n","^So go let's go back and check the values first instead, okay? ",{"->":"right1"},"\n",{"#f":5}]}],{"#f":1}],"right2":[["^Great! Let's not rush and understand the whole scenario","\n","^Before resolving this, I have a question for you...","\n",["ev",{"^->":"right2.0.4.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":2},{"s":["^Q: Do you know why we set net.bridge.bridge-nf-call-iptables to 1?",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"right2.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.4.s"},[{"#n":"$r2"}],"\n","^Ans: This is done so that iptables are able to receive bridged network traffic. And     ensures that packets are properly processed by IP tables during filtering and port forwarding. ",{"->":"view"},"\n",{"#f":5}]}],{"#f":1}],"view":[[["ev",{"^->":"view.0.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":2},{"s":["^Let's view the files",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"view.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"\n","^cat /proc/sys/net/bridge/bridge-nf-call-iptables","\n","^0","\n","^cat /proc/sys/net/bridge/bridge-nf-call-ip6tables","\n","^1","\n","^There it is! We just need to update the bridge-nf-call-iptables value from 0 to 1 ",{"->":"work"},"\n",{"#f":5}]}],{"#f":1}],"work":[[["ev",{"^->":"work.0.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":18},{"s":["^Edit the bridge-nf-call-iptables manually. ",{"->":"$r","var":true},null]}],["ev",{"^->":"work.0.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-1","flg":18},{"s":["^Run the Fix.sh script to edit bridge-nf-call-iptables. ",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"work.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],{"->":"wrong3"},"\n",{"#f":5}],"c-1":["ev",{"^->":"work.0.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],{"->":"right3"},"\n",{"#f":5}]}],{"#f":1}],"wrong3":[[["ev",{"^->":"wrong3.0.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":2},{"s":["^ERROR: Permission Denied",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"wrong3.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"\n","^Oh! Have you forgotten that we don't have super user privileges? We cannot edit the file manually! ",{"->":"work"},"\n",{"#f":5}]}],{"#f":1}],"right3":["^Awesome! You remembered that we cannot edit the file manually!","\n","^/----- runs the Fix.sh file ------/","\n","^Let's check if the changes were made successfully","\n","^cat /proc/sys/net/bridge/bridge-nf-call-iptables","\n","^1","\n",{"->":"final"},{"#f":1}],"final":[["^Let's be sure our bot is now working by following the post checks:","\n",["ev",{"^->":"final.0.2.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":2},{"s":["^1. Run the curl call command ",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"final.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.2.s"},[{"#n":"$r2"}],{"->":"confirm"},"\n",{"#f":5}]}],{"#f":1}],"confirm":[[["ev",{"^->":"confirm.0.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":2},{"s":["^2. Make a test call ",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"confirm.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],{"->":"update"},"\n",{"#f":5}]}],{"#f":1}],"update":[["ev","str","^Update on Slack that the issues is now resolved!","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"ending"},"\n",{"#f":5}]}],{"#f":1}],"ending":["^Great job! You're promising to become the best DevOps Engineer. ","end","\n",{"#f":1}],"enjoy":["^Sit back and enjoy! Let your teammate do the work! ","end","\n",{"#f":1}],"#f":1}],"listDefs":{}}
