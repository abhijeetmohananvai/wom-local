{"inkVersion":19,"root":[["^We received an alert in fire-infra noting that...","\n",["ev",{"^->":"0.2.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":"0.c-0","flg":2},{"s":["^\"The PV is filling up fast\" ",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":"0.2.s"},[{"#n":"$r2"}],{"->":"begin"},"\n",{"->":"0.g-0"},{"#f":5}],"g-0":["done",{"#f":5}]}],"done",{"begin":[["^What shall we do?","\n","ev","str","^Wait for someone else to pick this up","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Acknowledge the alert","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"wait"},"\n",{"#f":5}],"c-1":["^ ",{"->":"start"},"\n",{"#f":5}]}],{"#f":1}],"start":[["^How shall we approach this?","\n","ev","str","^Create a basecamp ticket","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Login to the production cluster and check out the NFS pod","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"right1"},"\n",{"#f":5}],"c-1":["^ ",{"->":"wrong1"},"\n",{"#f":5}]}],{"#f":1}],"right1":[["^Awesome!","\n","ev","str","^---Ticket created---","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ","\n","^Logged into the production cluster ",{"->":"wave"},"\n",{"#f":5}]}],{"#f":1}],"wrong1":["^It is a good practice to raise a ticket first, since it helps with visibility. Let's try again? ",{"->":"start"},"\n",{"#f":1}],"wave":[["ev","str","^Understand the issue first","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Check the nfs-server-0 pod","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"wave0"},"\n",{"#f":5}],"c-1":["^ ",{"->":"wrong2"},"\n",{"#f":5}]}],{"#f":1}],"wave0":["^Persistent volume storage for FSM gRPC is 30 GB. and space left is 8.6% which is 2.58 GB left out. ",{"->":"wave1"},"\n",{"#f":1}],"wrong2":["^Let us first understand the the complete scenario. ",{"->":"wave"},"\n",{"#f":1}],"wave1":[["^Enter into the pod using this command","\n",["ev",{"^->":"wave1.0.2.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":2},{"s":["^kubectl exec -it nfs-server-0   bash",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"wave1.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.2.s"},[{"#n":"$r2"}],"\n","^Check in /exports/fsm-service/","\n","^du -sh *","\n","^NFS Server (200 GB),","\n","^Timescale: 75 GB","\n","^Kaldi Serve: 80 GB","\n","^Other stuff","\n","^The storage is completely used ",{"->":"wave2"},"\n",{"#f":5}]}],{"#f":1}],"wave2":[[["ev",{"^->":"wave2.0.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":2},{"s":["^What next?",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"wave2.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"\n","^Lets free up some storage to fix this problem temporarily so that it doesn't  impact our workloads. ",{"->":"wave3"},"\n",{"#f":5}]}],{"#f":1}],"wave3":[["ev","str","^Clean up Kaldi Serve","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Clean up Timescale DB storage","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"wave4"},"\n",{"#f":5}],"c-1":["^ ",{"->":"wave4"},"\n",{"#f":5}]}],{"#f":1}],"wave4":["^Great job! This gives us time to breathe, the proper solution to this is increasing the NFS storage.","\n","^Let's increase the storage for the nfs-pod. ",{"->":"wave5"},"\n",{"#f":1}],"wave5":[["^How will you increase the storage?","\n","ev","str","^Create a new pv and pvc with increased storage","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Edit the values.yaml & re-deploy","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["^ ",{"->":"wrong3"},"\n",{"#f":5}],"c-1":["^ ",{"->":"wave6"},"\n",{"#f":5}]}],{"#f":1}],"wrong3":["^That won't be necessary, we can edit the values.yaml file ",{"->":"wave5"},"\n",{"#f":1}],"wave6":[["^Great job!","\n","^You can just change the pvcs value in values.yaml and re-deploy since it is bounded to gp2 storage-class EKS would automatically provision a volume","\n","ev","str","^Edit the values.yaml","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":[{"->":"wave7"},"\n",{"#f":5}]}],{"#f":1}],"wave7":[["ev","str","^---Increase the pvc's value from 200G to 250G---","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":"wave8"},"\n",{"#f":5}]}],{"#f":1}],"wave8":[["^Check the storage again in /exports/fsm-service/","\n",["ev",{"^->":"wave8.0.2.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0","flg":2},{"s":["^du -sh *",{"->":"$r","var":true},null]}],{"c-0":["ev",{"^->":"wave8.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.2.s"},[{"#n":"$r2"}],"\n","^NFS Server (250 GB),","\n","^Timescale: 50 GB","\n","^Kaldi Serve: 60 GB","\n","^Other stuff","\n","^Good job! This issue is now solved! ",{"->":"ending"},"\n",{"#f":5}]}],{"#f":1}],"ending":["^Do not forget to update and close the ticket. ","end","\n",{"#f":1}],"wait":["^Sit back and relax! Bye! ","end","\n",{"#f":1}],"#f":1}],"listDefs":{}}
